---
output:
  md_document:
    variant: markdown_github
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "figure/README-"
)
```
[![Travis-CI Build Status](https://travis-ci.org/mdsumner/rbgm.svg?branch=master)](https://travis-ci.org/mdsumner/rbgm)
[![](http://www.r-pkg.org/badges/version/rbgm)](http://www.r-pkg.org/pkg/rbgm)
[![](http://cranlogs.r-pkg.org/badges/rbgm)](http://www.r-pkg.org/pkg/rbgm)

## rbgm - R tools for Box Geometry model files

rbgm allows reading of geometry from BGM files, either in raw
coordinate form or as Spatial objects. 

rbgm aims to make all of this straightforward: 

* read of the BGM format, maintaining all topology and attributes
* use of the BGM specification for visualization and data extraction
* creation of BGM from from shapefiles, R spatial objects and whatever else

There is some overlapping functionality with [oms](https://github.com/mdsumner/oms), for coupling with ROMS output and with [gris](https://github.com/mdsumner/gris), for building
topological data structures. All of these packages are in development and are subject to change. 


## Install dev version

```{r,eval=FALSE}
# install.packages("devtools")
devtools::install_github("mdsumner/rbgm")
```

## Example

```{r}
library(rbgm)
## example data set in package
fname <- system.file("extdata", "Antarctica_28.bgm", package = "rbgm")
bgm <- read_bgm(fname)
plot(boxSpatial(bgm), col = grey(seq(0, 1, length = nrow(bgm$boxes)), alpha = 0.5))

(spdf <- boxSpatial(bgm))
(sldf <- faceSpatial(bgm))
text(coordinates(spdf), labels = spdf$label, col = grey(seq(1, 0, length = nrow(bgm$boxes))), cex = 0.8)

plot(boxSpatial(bgm), col = grey(seq(0, 1, length = nrow(bgm$boxes)), alpha = 0.5))

plot(sldf, col = rainbow(nrow(sldf)), lwd = 2,  add = TRUE)
text(do.call(rbind, lapply(coordinates(sldf), function(x) apply(x[[1]], 2, mean))), 
     labels = gsub("ace", "", sldf$label), cex = 0.8, col = rainbow(nrow(sldf)), pos = 3)

```


## More information

The BGM format and usage is described at the (registration-required) Atlantis wiki: http://atlantis.cmar.csiro.au/


